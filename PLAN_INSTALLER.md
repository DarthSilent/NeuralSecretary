# План создания инсталлятора для Meeting App

Этот план описывает шаги по превращению Python-скрипта в полноценное устанавливаемое приложение Windows (.exe) с инсталлятором.

## 1. Подготовка кода (Важно!)

Текущая версия приложения сохраняет данные (записи, базу голосов, настройки) в папку с исполняемым файлом (`external_path`). Если установить приложение в `C:\Program Files`, оно не сможет там писать без прав администратора.

**Необходимо изменить логику путей в `meeting_app.py`:**

- Если приложение запущено как `.exe` (frozen), использовать папку пользователя для данных (например, `Documents\MeetingApp` или `%APPDATA%\MeetingApp`).
- Это обеспечит корректную работу без прав админа.

## 2. Сборка EXE (PyInstaller)

Мы будем использовать `PyInstaller` для упаковки скрипта, библиотек и зависимостей в один файл (или папку).

### Создание `meeting_app.spec`

Нужно создать файл конфигурации сборки, где укажем:

- **Скрипт**: `meeting_app.py`
- **Данные**:
  - `ffmpeg.exe` и `ffprobe.exe` (чтобы они были внутри)
  - `USER_MANUAL.md`
  - `files_browser_methods.py` (автоматически подтянется, но проверим)
- **Скрытые импорты**: Библиотеки `pyannote`, `sklearn`, `scipy` часто требуют явного указания `hiddenimports`.
- **Иконка**: Если есть `.ico` файл.

**Команда сборки:**

```bash
pyinstaller meeting_app.spec
```

## 3. Создание Инсталлятора (Inno Setup)

Используем **Inno Setup** — стандарт де-факто для создания инсталляторов Windows. Он бесплатный и мощный.

### Создание скрипта `setup.iss`

Скрипт будет:

1. **Копировать файлы**: Брать результат работы PyInstaller (папку `dist\meeting_app`) и копировать в папку назначения (например, `C:\Program Files\MeetingApp`).
2. **Создавать ярлыки**:
    - На Рабочем столе.
    - В меню Пуск.
3. **Ассоциации файлов** (если нужно).
4. **Деинсталлятор**: Создается автоматически.

## 4. Автоматизация (Build Script)

Создадим `build_installer.bat`, который будет делать всё одной кнопкой:

1. Очищать старые сборки.
2. Запускать PyInstaller.
3. Запускать компилятор Inno Setup (ISCC.exe).
4. Выдавать готовый `setup.exe`.

---

## Детальные шаги реализации

### Шаг 1: Модификация путей в `meeting_app.py`

Нужно изменить блок определения путей, чтобы данные хранились в `os.path.expanduser("~\Documents\MeetingApp")`.

### Шаг 2: Установка инструментов

Вам понадобится:

- Установленный Python и venv (уже есть).
- **Inno Setup** (нужно скачать и установить с jrsoftware.org).

### Шаг 3: Генерация Spec-файла

Мы создадим `meeting_app.spec` с правильными настройками.

### Шаг 4: Генерация ISS-скрипта

Мы создадим `setup.iss` для Inno Setup.

### Шаг 5: Сборка

Запуск батника.
